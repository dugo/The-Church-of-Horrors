{% extends "base.html" %}
{% load blog %}

{% block extra_metatags %}
<meta name="keywords" content="{{entry.tags.all|join:","}}"/>
<meta name="description" content="{{entry.get_brief|remove_linebreaks}}" />
{%endblock%}

{% block title %}The Church of Horrors :: {{entry}}{%endblock%}

{% block author %}{% mini_author entry.author %}{% endblock %}

{%block breadcrumb%}{% breadcrumb request.get_full_path entry.section entry.subsection %}{%endblock%}

{%block content_class%}entry{%endblock%}

{%block extra_js%}
<script type="text/javascript" src='{{STATIC_URL}}thechurch/js/jquery.scrollTo-min.js'></script>
<script type="text/javascript">
$(document).ready(function(){
    var wrapper_height = $($('.content-entry')[0]).height();
    var real_height = $($('.content-entry .paging-container')[0]).height();

    var pages = Math.ceil(parseFloat(real_height)/parseFloat(wrapper_height));

    if (pages>1) {
        for (var i=0;i<pages;i++) {
            $('#paging').append("<span onclick='$(document).scrollTo(\"#content\",{easing:\"swing\",duration:\"slow\"});$($(\".content-entry .paging-container\")[0]).animate({\"margin-top\":\"-"+(i*wrapper_height)+"px\"});'>"+(i+1)+"</span>");
            }
        $('#paging span').scrollTo({
           target:'#content',
           lazy: true
        });
    }
});
</script>
{%endblock%}

{%block content%}
    {%if user.is_superuser or entry.author.id == request.user.id%}<a href="{% url admin:blog_entry_change entry.id %}" onclick="window.open(this.href);return false;" class="edit">Editar</a>{%endif%}
    <br/>
    <a href="{{e.get_absolute_url}}"><h1>{{entry.title}}</h1></a>
    <span class="date">{{entry.created|date}}</span>
    {% if entry.show_gallery%}{%entry_gallery entry%}{%endif%}
    <div class="content-entry"><div class="paging-container">{{entry.content|safe}}</div></div>
    <div id="paging"></div>
    <!--<hr/>-->
{%endblock%}
